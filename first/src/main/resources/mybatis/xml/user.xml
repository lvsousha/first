<?xml version="1.0" encoding="utf-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.stone.mapper.UserDao">

    <resultMap type="com.stone.model.User" id="userResult">
        <result property="id" column="id" jdbcType="INTEGER" javaType="java.lang.Integer" />
        <result property="username" column="username" />
        <result property="password" column="password" />
        <result property="salt" column="salt" />
        <result property="locked" column="locked" />
    </resultMap>

    <insert id="insert" parameterType="com.stone.model.User">
		insert into users(
				username,
				password,
				salt,
				locked
		) values (
				#{username,jdbcType=VARCHAR},
				#{password,jdbcType=VARCHAR},
				#{salt,jdbcType=VARCHAR},
				#{locked,jdbcType=INTEGER}
		)
		<selectKey keyProperty="id" resultType="java.lang.Integer" order="AFTER">
			select @@IDENTITY as id
		</selectKey>
	</insert>

    <select id="selectUsers" resultMap="userResult">
        select *
        	from users
    </select>

    <select id="select" parameterType="int" resultMap="userResult">
        select *
        	from users where id=#{id}
    </select>

    <update id="updateUser" parameterType="user">
        update
        	users set
		        username=#{username},
		        password=#{password}
        	where id=#{id}
    </update>

    <delete id="deleteUser" parameterType="int">
        delete
        	from users
        	where id=#{id}
    </delete>

</mapper>